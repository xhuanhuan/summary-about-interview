<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>js延迟加载测试</title>
  <style>
    .back{
      padding:20px;
      padding-left: 30%;
      background-color: blue;
    }
    #div2{
      padding:20px;
      padding-left: 30%;
      background-color: blue;
    }
  </style>
  <script type="text/javascript" src="jquery-1.12.3.min.js"></script>
  <script defer  src='test.js'>
  </script>
  <script type="text/javascript">
     function downloadJSAtOnload() {
         var element = document.createElement("script");
        element.src = "test2.js";
        document.body.appendChild(element);
     }
     if (window.addEventListener)
        window.addEventListener("load",downloadJSAtOnload, false);
     else if (window.attachEvent)
        window.attachEvent("onload",downloadJSAtOnload);
     else window.onload =downloadJSAtOnload;
   </script>
</head>

<body>
  <div class='back' id='div1'>
    <h2>测试js延迟加载</h2>
    <p>背景颜色原本是蓝色的，js代码中获取背景的DOM,并修改颜色为绿色</p>
    <p>js代码放在head中，会比DOM先加载，但是获取不到id,所以不会更改颜色</p>
    <p>在script中加入defer=true或者async=true可以解决这个问题</p>
    <p>不支持inline,不支持document.write()</p>
  </div>
  <div id='div2'>
    <h2>测试js延迟加载:动态创建DOM</h2>
    <p>背景颜色原本是蓝色的，js代码中获取背景的DOM,并修改颜色为黄色</p>
    <p>js代码放在head中，会比DOM先加载，但是获取不到id,所以不会更改颜色</p>
    <p>采用onload之后创建script的方式实现js的延迟加载</p>
  </div>
</body>

</html>
